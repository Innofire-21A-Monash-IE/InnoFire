package com.example.chadwickzhao.innofire;import android.content.Intent;import android.os.AsyncTask;import android.support.v7.app.AppCompatActivity;import android.os.Bundle;import android.util.Log;import android.view.View;import android.view.View.OnClickListener;import android.widget.Button;import android.widget.TextView;import java.util.List;import java.util.Random;public class MainActivity extends AppCompatActivity {    int totaltoday;    int SleepHoursinToday;    final Group1 g = new Group1();    Button userProfile;    Button manager_function;    Button mySummery;    Button myInput;    Button myRelax;    user u;    TextView tv3;    String username;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        Intent i = getIntent();        u = (user)i.getSerializableExtra("User-entity");        Bundle extras = getIntent().getExtras();        if (extras != null) {            totaltoday = extras.getInt("total");            SleepHoursinToday = extras.getInt("sleep");            //The key argument here must match that used in the other activity        }        tv3 = (TextView) findViewById(R.id.textView3);        tv3.setText("Hi, " + u.getUsername().toString());        manager_function = (Button) findViewById(R.id.manager);        if(u.getPosition().toString().equals("manager")){            manager_function.setVisibility(View.VISIBLE);        }else{            manager_function.setVisibility(View.INVISIBLE);        }        manager_function.setOnClickListener(new OnClickListener() {            @Override            public void onClick(View view) {                transferToManager();            }        });        mySummery = (Button) findViewById(R.id.mysum);        mySummery.setOnClickListener(new OnClickListener() {            @Override            public void onClick(View view) {                g.setUsername(new user[]{u});                Random r = new Random();                int i1 = (r.nextInt(80) + 65);                //g.setGroupId(Integer.parseInt(groupid.getText().toString()));                g.setGroupUserId(i1);                g.setGroupUserId(i1);                processCreateGroup();                transfertoReport();            }        });        myInput = (Button) findViewById(R.id.myinput);        myInput.setOnClickListener(new OnClickListener() {            @Override            public void onClick(View view) {                transfertoMyinput();            }        });        myRelax = (Button) findViewById(R.id.myrelax);        myRelax.setOnClickListener(new OnClickListener() {            @Override            public void onClick(View view) {                transfertoRelaxation();            }        });        userProfile = (Button) findViewById(R.id.up);        userProfile.setOnClickListener(new OnClickListener() {            @Override            public void onClick(View view) {                transfertoUserinfo();            }        });    }    public void transfertoMyinput(){        Intent intent = new Intent(MainActivity.this, Input_layoutforRelax.class);        intent.putExtra("total", totaltoday);        intent.putExtra("sleep", SleepHoursinToday);        intent.putExtra("User-entity",u);        startActivity(intent);    }    public void transfertoReport(){        Intent intent = new Intent(MainActivity.this, Report.class);        intent.putExtra("total", totaltoday);        intent.putExtra("sleep", SleepHoursinToday);        intent.putExtra("User-entity",u);        startActivity(intent);    }    public void transfertoUserinfo(){        Intent intent = new Intent(MainActivity.this, showProfile.class);        intent.putExtra("total", totaltoday);        intent.putExtra("sleep", SleepHoursinToday);        intent.putExtra("User-entity",u);        startActivity(intent);    }    public void transfertoRelaxation(){        Intent intent = new Intent(MainActivity.this, Relaxation.class);        intent.putExtra("total", totaltoday);        intent.putExtra("sleep", SleepHoursinToday);        intent.putExtra("User-entity",u);        startActivity(intent);    }    public void transferToManager(){        Intent intent = new Intent(MainActivity.this, ManagerFunction.class);        intent.putExtra("User-entity",u);        intent.putExtra("total", totaltoday);        intent.putExtra("sleep", SleepHoursinToday);        startActivity(intent);    }    public void getUserProfile(final String username){        new AsyncTask<String, Void, List<user>>() {            @Override            protected List<user> doInBackground(String... strings) {                return Connection.getbyUsername(username);            }            @Override            protected void onPostExecute(final List<user> users) {                u = users.get(0);            }        }.execute();    }        public void processCreateGroup(){            new AsyncTask<String, Void, String>(){                @Override                protected String doInBackground(String... strings) {                    return Connection.createGroup(g);                }                @Override                protected void onPostExecute(String s) {                }            }.execute();        }}